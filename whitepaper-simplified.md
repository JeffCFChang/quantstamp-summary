# Quantstamp: 智能合约安全协议

~~本来想要直接翻译白皮书，后来发现工作量也不小，写个大概吧。去掉技术细节的晦涩部分，保留方便理解整个系统的部分~~

**Quantstamp是第一个智能合约安全审计协议。** 我们用可以确保智能合约安全性的技术来拓展以太坊。我们的团队是由一群软件测试专家组成，总共超过500个谷歌学者引用。

## 问题
区块链网络是安全的，但是智能合约并不安全。2016年6月，黑客从DAO项目中盗取了价值5500万美元的币，原因是智能合约中的一个缺陷。2017年7月，有黑客从加密公司盗取了价值超过3000万美元的代币，只因为Parity钱包的智能合约代码中的一个单词错误。这些安全问题损坏了对智能合约的信任，进一步也阻碍了以太坊网络被更广泛地使用。

当前人们对审计智能合作做的很不充分。从事安全咨询的公司需要人工专家去审核智能合约。这种处理方式昂贵且容易出错。并且依赖于一个公司，需要相信公司中没有任何坏角色。一个依赖于多种不同角色共识的分布式系统显著地更为安全。

人工审计的处理方式，无法应对智能合约的爆炸式增长。2017年6月到10月，智能合约的数量，从50万增长到了200万。我们可以预期1年内会增长为1000万。这对审计工作会有指数级的增长。如今我们没有足够的安全专家来审计所有的智能合约，并且这个短缺未来会更为严峻。

智能合约失败的潜在代价也会增长。仅仅2017年10月，约有32亿美元(1100万ETH)在智能合约中锁定这。而锁定在智能合约中的美元会随着以太坊和智能合约使用的增长而指数级增长。智能合约中漏洞的潜在带带也会相应增长。

## Quantstamp协议
Quantstamp协议通过创建可伸缩低成本的系统审计所有以太坊网络的网络的智能合约，来解决智能合约的安全问题。随着时间的推移，我们希望每一个以太坊智能合约都使用Quantstamp协议来执行安全审计，安全是最基本的。  

协议包含两部分：
- 一个自动且可升级的软件验证系统，用于检查Solidity程序。分布式SAT解析器会需要大量的算力，但随着时间推移，会捕获到更为复杂的攻击。
- 一个自动的赏金支付系统，用于奖励查找合约缺陷的人工参与者。这个系统的目的，是桥接起通往全自动化目标的隔阂。

Quantstamp协议依赖于参与者们的分布式网络，来减轻坏角色的作用，提供所需的算力，还有提供管治。每一个参与者都使用Quantstamp协议（QSP）令牌来支付，接收，或者提高验证服务。下面是不同类型的参与者。

- **贡献者** 为Solidity验证程序贡献软件，然后获得QSP令牌。所有贡献的带慕都会开源，这样社区可以对效率有所信任。绝大部分的贡献者将会是安全专家。贡献是通过管治机制来投票的。
- **验证器** 运行Quantstamp验证节点并获得QSP令牌。验证着只是贡献计算资源，不需要是安全专家。
- **缺陷寻找者** 提交智能合约缺陷，获得QSP令牌作为赏金。
- **合约创建者** 支付QSP令牌验证以验证智能合约。由于智能合约的数量在爆炸式增长，我们预计合约穿件这的需求也会相应增长。
- **合约使用者** 可以查看智能合约的安全审计结果。
- **投票者** 官职系统是协议的一个核心特性。验证被设计为模块化的并且可以基于令牌持有者的投票来升级。管治机制减少了升级分叉的可能性，也会随着时间推移，去中心化创建团队的影响。

## 动机
我们团队成员的职业都在帮助开发者生产更可靠的代码，具备软件验证学科上，多年的科学研究和实战经验。


## 智能合约改进
### 我们如何改进智能合约架构
### 我们如何改进开发者流程
### Quantstamp示例

## 技术
### 校验协议
#### 设计
### 安全审计引擎

安全审计引擎采用一个非验证的智能合约作为输入，执行自动的安全及漏洞检查并生成报告。验证结果会和一个proof-of-audit（审计证明）哈希结合起来，这个哈希会有一个版本代码从那个版本的安全库中追踪范围检查。

在安全库中运行完整测试所需的时间与智能合约代码的复杂性相关，因此，验证奖励与计算时间成正比。验证者需要奖励来激励其参与这一过程，因此发行令牌让使用者可以使用这些功能。

当知道智能合约被通过共识的方式透明验证时，公众越来越有信心，从而激励开发者使用这些特性。整体信心则会由于尝试找到重大缺陷的赏金猎人的努力得到进一步提升。

此外，随着新的漏洞被发现，安全库将会不断改进和发布新版本。用户将有机会用最新版本的安全库重新验证其使用的智能合约，确保他们的代码不会受到新发现的漏洞的攻击。这类似于软件用户下载补丁修复安全漏洞或用户更新其防病毒软件。

### 架构图

Quantstamp协议（QSP）是一个可扩展的系统来审计所有的基于以太坊的智能合约项目。我们对Quantstamp安全协议的愿景是它将成为以太坊协议其中的一部分。

QSP分为三个概念类别：

1.	基于以太坊的Quantstamp校验智能合约
2.	由被高度修正的以太坊节点组成的Quantstamp网络（QN）
3.	Quantstamp报告（数据承载于智能合约交易中）

QN是一个验证者节点的网络，以共识的方式生成安全报告。作为一种效用，QSP与平台无关——安全库可以有许多变体，其中之一包括Solidity（用于以太坊），以及可能涵盖其他不同平台的智能合约语言的变体。

#### Quantstamp校验智能合约

最终用户可以访问以下功能列表。

注册（）
用户可以注册一个以太坊地址，该地址警告Quantstamp网络监控注册地址的API命令。


审计（）
用户可以为一个安全审计提交源代码以及令牌赏金费用。成功后，智能合约被数字签署以证明其通过关键的安全检查。在此刻，就可以获取一份加密的安全报告。bug赏金仍然在合约上，从而激励查找bug的人，直到到达指定的时间限制。

升级（）
升级现有的智能合同。新版本的智能合同必须通过安全审计。现有的赏金向前滚动。


#### Quantstamp网络

Quantstamp网络（QN）是一种专用协议，能够监视与注册的智能合约相关的、涉及到调用Quantstamp校验智能合约的交易。

#### Quantstamp报告

 “Quantstamp报告”提供了QN执行的安全审计的公开视图。这些报告将通过qsscan.io上的基于Web的用户界面展示。

报告可以是公共的或私人的。每个人都可以看到并阅读到公共报告。注册用户则可以用公共密钥对私人报告进行加密，只有注册用户可以阅读报告的内容。一旦智能合约被部署，智能合约的最终的安全报告是公开的。这样可以让投资者和其他用户在提交资金前查阅这些报告。

智能合约的所有者被鼓励在安全报告中加入注释。智能合约所有者被鼓励对所有已发布的安全警告和被标记的问题进行回复。答复可能是简单的“这是假阳性”或“我们不关心这个问题”，也可能是非常详细的。所有者的责任是向那些想要阅读安全报告来提高信任度的人提供尽可能多的信息。 基于对在安全报告中的发现、赏金的额度、赏金已经生效时间的长度以及社区的反馈，每个智能合约都将被计算得到一个“信任评分”。

### 交换方式
#### 计算机辅助推理工具
##### SAT解析器
##### SMT解析器
#### 模型检查
#### 静态程序分析
#### 符号执行及Concolic testing
### 增量发布和订阅模型
### 缺陷查找器
### 安全泄露策略
### 分布并行SAT
#### 可满足性问题(SAT)
#### 并行SAT解析器
#### 并行SAT与共识
### 以太坊/Solidity的常见漏洞
## 财务计划
## 团队调研贡献
### Demo:定位Parity多方签名漏洞
## 常见问题与解答
## 详细履历
## 附录A
## 附录B
## 附录C






